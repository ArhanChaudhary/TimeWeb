{% extends "template.html" %}
{% load static %}
{% block css %}
label[for="id_x"]::after, 
label[for="id_funct_round"]::after,
label[for="id_min_work_time"]::after,
label#nwd-label-title::after {
    content: "\002A";
}
#note {
    text-align: center;
    font-size: 10px;
    margin-bottom: -1em;
    font-style: italic;
}
#note::before {
    content: "\002A";
}
#form-wrapper {
    width: 400px;
    background: white;
    box-shadow: 0 0 8px black;
    margin: 1em auto;
    border-radius: 15px;
    padding-bottom: 25px;
}
.field {
    width: calc(100% - 50px);
    margin: 5px;
}
label, #nwd-label-title {
    text-align: center;
    display: block;
}
label:not(.nwd-label) {
    margin: 0 25px;
}
#nwd-wrapper {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    margin: -1em 50px 0;
}
.nwd-input {
    display: none;
}
.nwd-input:checked + .nwd-label {
    background: darkgray;
}
.nwd-label {
    background: white;
    display: inline-block;
    margin-right: 2px;
    margin-bottom: 4px;
    border: 1px solid gray;
    border-radius: 5px;
    padding: 4px;
}
.nwd-label:hover {
    background: lightgray;
}
.nwd-label:active {
    outline: 0;
    background: gainsboro;
}
input {
    box-sizing: border-box; 
    display: block;
    margin-left: auto;
    margin-right: auto;
    width: calc(100% - 20px);
}
#submit-button {
    margin: 0 auto;
    display: block;
    padding: 20px 60px;
    font-size: 19px;
}
{% endblock %}

{% block js %}
<script>
$(function() {
    if (!$('#id_ad').val()) {
        $('#id_ad').val(new Date().getFullYear() + "-01-01");
    }
    if (!$('#id_x').val()) {
        $('#id_x').val(new Date().getFullYear() + "-01-01");
    }
    $("#id_works").attr({"step":"0.01","type":"number"});
    $("input").attr("tabindex","1");
});
</script>
<script>
$(document).keydown(function(event) {
    if (event.key == 'Meta') {
        $("#submit-button").click();
    }
});
</script>
{% endblock %}

{% block body %}
    <div id="content" class="animate">
        <div id="form-wrapper">
            <form method="POST" autocomplete="off">
                {% csrf_token %}
                <div id="note"> can be skipped<br>Tip: keep pressing tab</div>
                <b>{{ error }}</b>
                {% for field in form.visible_fields %}
                    <p>
                        {{ field.errors }}
                        {% if field.name == "nwd" %}
                            <label id="nwd-label-title">Select the Weekdays you will Not work on this Assignment</label>
                            <div id="nwd-wrapper">
                                {% for value, text in field.field.choices %}
                                    <input class="nwd-input" id="id_nwd_{{ forloop.counter0 }}" name="{{ field.name }}" type="checkbox" value="{{ value }}" {% if value in checked_nwd %}checked="checked"{% endif %}>
                                    <label tabindex="1" class="nwd-label" for="id_nwd_{{ forloop.counter0 }}">{{ text }}</label>
                                {% endfor %}
                            </div>
                        {% elif field.name == "works" %}
                            {{ field.label_tag }}
                            {{ field.as_text }}
                        {% else %}
                            {{ field.label_tag }}
                            {{ field }}
                        {% endif %}
                        {% if field.help_text %}
                            <p class="help">{{ field.help_text|safe }}</p>
                        {% endif %}
                    </p>
                {% endfor %}
                {% for hidden in form.hidden_fields %}
                    {{ hidden }}
                {% endfor %}
                <button type="submit" name="submit-button" id="submit-button" title="(Command)" tabindex="1">{{submit}}</button>
            </form>
        </div>
    </div>
    <div class="headerfooter animate" id="footer"></div>
{% endblock %}